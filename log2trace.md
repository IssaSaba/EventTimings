# log2trace

# Purpose and Function

The tool __log2trace__ reads the event log files generated by one or multiple applications and assembles a single tracing file.
The chromium tracing tool, built into chromium browsers (`chrome://tracing`), can read this file and produce a browsable timegraph.
The tool is also available as a [standalone](https://github.com/catapult-project/catapult/tree/master/tracing) as a part of the
[catapult project](https://github.com/catapult-project/catapult/).


# Usage

```sh
log2trace.py -p -b def A=./Events-A.log B=./Events-B.log
```

| Parameter | Description |
| --------- | ----------- |
| `-h`, `--help`   | Print the help. |
| `-p`, `--pretty` | Outputs the JSON structure in a human-friendly format. |
| `-d`, `--default`| Overwrites the default category name (`default`) for unknown events. |
| `-m`, `--mapping`| A JSON file with a mapping from event name to category |
| `APPLICATION=LOGFILE ...` | Reads a logfile for each application. |


# Technical Details

The format of the resulting JSON is based on the given [specification](https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/preview#).

The current logging format logs the event starts and stop times.
This is equivalent to the `Duration Event` type from the specification.

The logical mapping between EventTimings and the specification is:

| specification | EventTimings |
| ------------- | ------- |
| processes | applications |
| threads |  ranks |

The script may read a mapping using `--mapping` option which assigns categories to events based on their name.
An event is considered _unknown_ if there is no corresponding entry in this mapping.
In such a case, a default class gets assigned to it.
This default is `default` and may be overwritten using the `--default` option.
